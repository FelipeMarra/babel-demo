---
layout: post
title:  ''
---


Abstract
---------------

This paper investigates the capabilities of text-to-audio music generation models in producing long-form music with prompts that change over time, focusing on soundtrack generation for Tabletop Role-Playing Games (TRPGs). We introduce Babel Bardo, a system that uses Large Language Models to transform speech transcriptions into music descriptions for controlling a text-to-music model. Four versions of Babel Bardo were compared in two TRPG campaigns: a baseline using direct speech transcriptions, and three LLM-based versions with varying approaches to music description generation. Evaluations considered audio quality, story alignment, and transition smoothness. Results indicate that detailed music descriptions improve audio quality, while maintaining consistency across consecutive descriptions enhances transition smoothness. Emotion-based descriptions proved effective for aligning generated music with TRPG narratives.

___________________________________________________________________________________________________________________________________________________________


System Overview
---------------
At every 30 seconds of gameplay, Babel Bardo transcribes the players' speeches into a text _s<sub>i</sub>_ using a Speech Recognition system and uses a Large Langue Model (LLM) to map _s<sub>i</sub>_ into a music description _d<sub>i</sub>_ that matches the scene described by the players. This music description is given to a Text-to-Music system that generates a 30-second piece _a<sub>i</sub>_ directly in the audio domain. <br><br>

<img src="{{site.baseurl}}/assets/imgs/bardo_overview.png"> <br><br>

For more information please head towards the original paper or it's code repository.

**Paper**: arxiv.org/pdf/TODO

**Code**: [github.com/FelipeMarra/babel-bardo](https://github.com/FelipeMarra/babel-bardo)

___________________________________________________________________________________________________________________________________________________________

Demo
---------------
The following presents examples containing a video link and four, three minutes-long, embedded videos. The link points to the original gameplay video, starting at the same time as the generated examples. The first of the embedded videos will also correspond to the original gameplay, but in the RPG "O Segredo na Ilha" it will be with the original soundtrack volume augmented. The other three embedded videos will be the soundtrack generated by three versions of Babel Bardo, namely: Emotion, Description and Description Continuation. The name of the Babel Bardo version will be a link to the system "logs". The logs contain the LLM prompt, the transcription generated by the SR system, and the LLM generated music description.

### Example 1
**Video Link**: [Call of The Wild, Episode 2](https://www.youtube.com/watch?v=5_Z8pVgCIgw&t=60)

**About**: In this example, we start at 1 min in the episode. Although the generation started at 0 min, we decided to center the example around a point where the systems might have identified an emotion transition. The video starts with cuts of episode 1, remembering the tragedies faced by the players. When the adventure of episode 2 begins, the players are talking about invading a farmer village. The possible transition point happens at minute 1:27, when the master narrates a calm scene about the farmers, where a father and his son are arriving at the village. Although it looks like a calm scene, in this context the players will actually destroy the village, since the villagers kidnapped members of the player's tribe. We can observe that Babel Bardo Description Continuation (BBDC) reacted to this at minute 1:50, generating a calm guitar. BBDC goes back and forth into calm guitar and suspense music, then settles up to calm guitar. Babel Bardo Emotion receives the emotion "Calm" from the LLM in this excerpt, but it maintains its consistency in relation to the previously generated music. The Description version is consistent in generating a Suspelceful piece.

<div class="video-row">
    <div >
        <h4>Original</h4>
        <iframe width="256" height="144" src="https://www.youtube.com/embed/yqIufAQhebg" frameborder="0" allowfullscreen=""></iframe>
    </div>
    <span style="margin-right:0.5em; display:inline-block;"></span>
    <div>
        <h4>
            <a class="open-modal" data-modal="modal-cotw-2-E"> Emotion </a>
        </h4>
        <iframe width="256" height="144" src="https://www.youtube.com/embed/0LZERqRHSb4" frameborder="0" allowfullscreen=""></iframe>
    </div>
</div>

<!-- Modal COTW 2 E -->
<dialog id="modal-cotw-2-E">
    <div class="modal-header">
        <h1 class="modal-title"> Babel Bardo E Logs </h1>

        <!-- Close Modal -->
        <button class="close-modal" type="button" data-modal="modal-cotw-2-E"> X </button>
    </div>

    <!-- Modal Body -->
    <div class="modal-body">
            <p>
                <b>LLM Prompt Setup:</b> You are going to receive a series of Role-playing Game (RPG) video transcript excerpts from players dialogs playing a campaing called Call Of The Wild. You will classify each dialog into one of the following emotions: Happy, Calm, Agitated, or Suspenseful. Your answer will be just one word, that is, one of those emotions.
            </p>
            <p>
                <b>Music Description Prime:</b> "Background music for a Role-playing Game (RPG) dialog, with the following emotion:"
            </p>

            <hr>

            <p>
                <b>Original Time:</b> 0:01:00 <br>
                <b>Example Time:</b> 0:00:00
            </p>
            <p>
                <b>Transciption:</b> "Ste little Steve they took them the slaves D finds a scroll on one of the guard's bodies it says there were orders to come and clear the outskirts of the town of savages the order was sent by Orville the cleric of Quinton Shire Orville of Quinton Shire Orville of Quinton Shire sent these orders directly what's up everybody tonight we"
            </p>
            <p>
                <b>Music Description:</b> "Background music for a Role-playing Game (RPG) dialog, with the following emotion: Agitated"
            </p>

            <hr>

            <p>
                <b>Original Time:</b> 0:01:30 <br>
                <b>Example Time:</b> 0:00:30
            </p>
            <p>
                <b>Transciption:</b> "are playing Dungeons and Dragons and last time we left off with a very traumatizing event for our party bran Darion and Noki a uh Barbarian tribe went out hunting and came back to see their Village slaughtered noi's family is dead darian's family thankfully survived but br's family his wife and child are missing they are on the hunt to find"
            </p>
            <p>
                <b>Music Description:</b> "Background music for a Role-playing Game (RPG) dialog, with the following emotion: Agitated"
            </p>

            <hr>

            <p>
                <b>Original Time:</b> 0:02:00 <br>
                <b>Example Time:</b> 0:01:00
            </p>
            <p>
                <b>Transciption:</b> "them [Music] Place yourselves at the edge of the forest when you're ready okay so let's figure out what we're going to do plan of action okay first off Brandon's family is missing still right yeah you should find them secondly you should find the leaders of this town and assassinate them I can turn myself into a rat and I can go around town and try to find them or we can talk to animals and try to so as you guys are discussing this something interrupts your"
            </p>
            <p>
                <b>Music Description:</b> "Background music for a Role-playing Game (RPG) dialog, with the following emotion: Suspenseful"
            </p>

            <hr>

            <p>
                <b>Original Time:</b> 0:02:30 <br>
                <b>Example Time:</b> 0:01:30
            </p>

            <p>
                <b>Transciption:</b> "conversation there is a son and his father walking along the edge of the stones here and they walk along the stones and they're both carrying sacks of potatoes potatoes they're walking along and the young young child says potatoes I love potatoes and the father's like well you know who makes the best potatoes I'm going to shoot no my love my mom she makes the best potatoes sou I'm so excited for potatoes tonight this evening is going to be the best when mom makes up wait does that"
            </p>

            <p>
                <b>Music Description:</b> "Background music for a Role-playing Game (RPG) dialog, with the following emotion: Calm"
            </p>

            <hr>

            <p>
                <b>Original Time:</b> 0:03:00 <br>
                <b>Example Time:</b> 0:02:00
            </p>
            <p>
                <b>Transciption:</b> "sound like does that sound like uh my son's voice oh no that does not sound like your son's voice these look like two farmers oh I hope the Savages never come down from the hills oh we we'll kill all the Savages son Oh yay father when I grow up I want to kill the Savages too and they walk along guys hey I whisper to you guys we'll burn their house down tonight while they're sleeping I can do it from behind this wall just throw a little Fireball at the corner ooh Magic I like that I should gather all the poisonous herbs I can"
            </p>
            <p>
                <b>Music Description:</b> "Background music for a Role-playing Game (RPG) dialog, with the following emotion: Agitated"
            </p>

            <hr>

            <p>
                <b>Original Time:</b> 0:03:30 <br>
                <b>Example Time:</b> 0:02:30
            </p>
            <p>
                <b>Transciption:</b> "find in the woods so that we can start you know use poisoning people if we need to Sam I'd like to use my herbalist kit and scour the woods and find some poisons starting now I rolled in 19 you find thistle root Thorn root Black Widow root green green Fang root and you find um classic green Fang rout uh you also find um yellow yellow tank same thing I hear they use that in space"
            </p>
            <p>
                <b>Music Description:</b> "Background music for a Role-playing Game (RPG) dialog, with the following emotion: Calm"
            </p>
    </div>
</dialog>

<div class="video-row">
    <div >
         <h4>
            <a class="open-modal" data-modal=""> Description  </a>
        </h4>
        <iframe width="256" height="144" src="https://www.youtube.com/embed/lP_wlA1x-Vo" frameborder="0" allowfullscreen=""></iframe>
    </div>
    <span style="margin-right:0.5em; display:inline-block;"></span>
    <div>
        <h4>
            <a class="open-modal" data-modal=""> Description Continuation </a>
        </h4>
        <iframe width="256" height="144" src="https://www.youtube.com/embed/beBimQZdjKA" frameborder="0" allowfullscreen=""></iframe>
    </div>
</div>

### Example 2

**Video Link**: [O Segredo na Ilha, Episode 1](https://www.youtube.com/watch?v=Pf4HzTdA2WE&t=12188s)

<div class="video-row">
    <div >
        <h4>Original w/ Augmented Volume</h4>
        <iframe width="256" height="144" src="https://www.youtube.com/embed/RFklOg3emtA" frameborder="0" allowfullscreen=""></iframe>
    </div>
    <span style="margin-right:0.5em; display:inline-block;"></span>
    <div>
        <h4>
            <a class="open-modal" data-modal=""> Emotion </a>
        </h4>
        <iframe width="256" height="144" src="https://www.youtube.com/embed/4dv2YIZz7sQ" frameborder="0" allowfullscreen=""></iframe>
    </div>
</div>

<div class="video-row">
    <div >
         <h4>
            <a class="open-modal" data-modal=""> Description  </a>
        </h4>
        <iframe width="256" height="144" src="https://www.youtube.com/embed/R3-5DUOIdO8" frameborder="0" allowfullscreen=""></iframe>
    </div>
    <span style="margin-right:0.5em; display:inline-block;"></span>
    <div>
        <h4>
            <a class="open-modal" data-modal=""> Description Continuation </a>
        </h4>
        <iframe width="256" height="144" src="https://www.youtube.com/embed/9CnYtTqdCnU" frameborder="0" allowfullscreen=""></iframe>
    </div>
</div>

{% include video_embed.html %}
{% include modal.html %}